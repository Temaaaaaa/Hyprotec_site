@use '../helpers' as *;

/* ——— Legal pages (privacy/cookies/terms) ——— */
.legal {
  &__meta { @include fluid-text(14,12); color: var(--color-gray-300); margin-top: .5rem; }

  &__body { padding-block: rem(24) rem(48); }

  &__container {
    display: grid;
    grid-template-columns: minmax(0, 1fr) minmax(0, 3fr);
    gap: rem(32);
    @include tablet { grid-template-columns: 1fr; }
  }

  /* TOC */
  &__toc {
    position: sticky; top: rem(24);
    align-self: start;
    background: var(--color-white);
    border: var(--border, 1px solid rgba(0,0,0,.08));
    border-radius: rem(12);
    padding: rem(16);
    @include tablet { position: static; }
  }
  &__toc-nav {
    display: grid; gap: rem(8);
    a {
      @include fluid-text(16,14);
      color: var(--color-dark);
      text-decoration: none;
      padding: rem(6) rem(8);
      border-radius: rem(8);
      transition: background-color var(--transition-duration,.2s);

      @include hover() { background: rgba(0,0,0,.04); }
      &:focus-visible { outline: 2px dashed var(--color-accent); outline-offset: 3px; }
    }
  }

  /* Content card */
  &__content {
    background: var(--color-white);
    border: var(--border, 1px solid rgba(0,0,0,.08));
    border-radius: rem(12);
    padding: clamp(1rem, 2vw, 1.75rem);
    line-height: 1.65;

    h2 { @include fluid-text(22,18); margin: 1.2em 0 .6em; }
    p, li { @include fluid-text(16,14); }
    ul { margin: .5em 0 1em 1.2em; }
    a { color: var(--color-accent); text-decoration: underline; }
    code { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; font-size: .95em; }
  }
}

/* Подсветка активного раздела по :target (необязательно, но приятно) */
:target { scroll-margin-top: rem(90); } /* чтобы заголовок не прятался под хедером */
.legal__toc-nav a[href*="#"] {
  &[href="##{target}"] {} /* чтобы не ломать сборку — пусто */
}
@supports selector(:has(*)) {
  .legal__toc-nav a {
    /* если заголовок в контенте в фокусе/цели — помечаем ссылку */
    &.is-active { background: rgba(0,0,0,.06); }
  }
}

/* Печать — чистая версия */
@media print {
  .header, .footer, .cookie, .section__rule, .legal__toc { display: none !important; }
  .legal__content { border: none; padding: 0; }
}
